<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<title>Объединенная больница с поликлиникой Управления Делами Президента РФ</title>
		<meta name='viewport' content='width=device-width, initial-scale=1'>
		
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/header.css">  
		<link rel="stylesheet" href="css/datepicker.css">
		<link rel="stylesheet" href="css/calendar.css">
		<link rel="stylesheet" href="media.css">


		<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&display=swap" rel="stylesheet">
		<link rel="apple-touch-icon" sizes="57x57" href="img/favicon/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="img/favicon/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="img/favicon/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="img/favicon/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="img/favicon/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="img/favicon/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="img/favicon/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="img/favicon/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="img/favicon/ms-icon-144x144.png">
		<meta name="theme-color" content="#ffffff">
	</head>
	<body>
		<div class="body-wrapper">
			<div class="slide_menu-overlay" style='display: none;opacity: 0;'>
				
				<div class="slide_menu-wrapper">
					<div class="slide_menu-button">
						<img src="img/close-2.png" alt="">
					</div>
					<nav class="slide_menu">
						<div>
							<a href="#" class="slide_link slide_link__accent">Акции</a>
						</div>
						<div>
							<a href="#" class="slide_link">Школа пациента</a>
						</div>
						<div>
							<a href="#" class="slide_link">Диспанцеризация</a>
						</div>
						<div>
							<a href="#" class="slide_link">Частые вопросы</a>
						</div>
						<div>
							<a href="#" class="slide_link">Наши достижения</a>
						</div>
						<div>
							<a href="#" class="slide_link">Вызов врача</a>
						</div>
						<div>
							<a href="#" class="slide_link">Обратная связь</a>
						</div>
					</nav>
					<div class="slide_line"></div>
					
					<div class="slide_link-wrapper">
						<a href="#" class="slide_link_opacity">Гарантии клиники</a>
						<a href="#" class="slide_link_opacity">Полезные материалы</a>
						<a href="tel:+74993333000" class="phone_number">8 (499) 333-30-00</a>
					</div>
					<a href="#" class="slide_policy">Политика обработки и защиты персональных данных</a>
					<a href="#" class="slide_policy">Лицензия № ФС-99-01-009591 от 29 ноября 2018 года</a>
				</div>
			</div>
			<div class="header-wrapper"  style=''>
				<header class="header">
					<div class="header-line">
						<div class="burger-wrapper">
							<div class="burger">
								<span class="burger-line"></span>
								<span class="burger-line"></span>
								<span class="burger-line" style='margin-bottom: 0;'></span>
							</div>
						</div>
						<div class="header-item wide-screen">
							<a href="info.html" class="header-item-link">О больнице</a>
						</div>
						<div class="header-item middle-screen">
							<a href="#" class="header-item-link">Контакты</a>
						</div>
						
						<a href='index.html' class="logo-wrapper">
							<img class="logo" alt='Логотип ОБП' src="img/logo.png">
						</a>
						<div class="header-item middle-screen">
							<div class="text-small text-right">Запись к врачу</div>
							<div class="text-phone text-right">8 (499) 333-30-00</div>
						</div>
						<div class="header-item wide-screen">
							<div class="text-small text-right">Госпитализация</div>
							<div class="text-phone text-right">8 (499) 719-81-00</div>
						</div>
						<div class="header-icon-wrapper">
							<a href="tel:+74993333000" class='header-account phone-icon'>
								<div class='header-account-wrapper' style='width: 100%;'>
									<img src="img/phone-call.png" alt="Иконка телефона" class='header-account-wrapper-logo'>
								</div>
							</a>
							<a href="login.html" class="header-account">
								<div class='header-account-wrapper' style='width: 100%;'>
									<img src="img/user (1).png" alt="Иконка личного кабинета" class='header-account-wrapper-logo'>
								</div>
								
								<div class='header-account-text'>Войти</div>
							</a>
						</div>
						
					</div>
					<section class="nav-wrapper nav-wrapper__wide" style='border-bottom-color: #ccc; height: 70px;' >
					<nav class="midnav">
						<a href="#" class="midnav-link">Акции</a>
						<a href="#" class="midnav-link">Пациентам</a>
						<a href="specialists.html" class="midnav-link">Специалисты</a>
						<a href="diag.html" class="midnav-link">Диагностика</a>
						<a href="poli.html" class="midnav-link">Поликлиника</a>
						<a href="reab.html" class="midnav-link">Реабилитация</a>
						<a href="stac.html" class="midnav-link">Стационар</a>
						<!-- <a href="#" class="midnav-link">Стоматология</a> -->
					</nav>	
						<!-- <a href="#" class="button button__accent" style='margin-left: 30px;'>Записаться на прием</a> -->
					</section>
				</header>
			</div>


			<section class="screen  screen__cal">
 
				<h1 class="screen-title cal-title">Записаться на прием</h1>
				<div class="screen-text  cal-text"> Наши врачи всегда остаются с вами на связи и готовы оказать помощь – вы можете воспользоваться услугой удаленной консультации. Запись осуществляется в личном кабинете. </div>


				<div class="screen-box">

					<div class="calendar-wrapper">
						<div class="calendar-text">Выберите дату приeма</div>
						<div type='text' id='calendar' class="datepicker-here" data-language='ru'></div>
					</div>

					<div class="time-wrapper">

						<div class="calendar-text">Выберите время приeма</div>

						<div class="time-box">
							<div class="time-item">08:00</div>
							<div class="time-item">09:00</div>
							<div class="time-item">10:00</div>
							<div class="time-item time-item__active">10:30</div>
						</div>

					</div>
					

					<div class="doctor-name">
						<span class="cal-text">Выбрано: </span>
						<a href="#" class="cal-link" id='service_time'>Вторник: 16 Июнь, 9:26</a>
					</div>

					<div class="doctor-name">
						<span class="cal-text">Выбрано: </span>
						<a href="#" class="cal-link" id='doctor_name'>Терапевт, Иванов Иван Иванович</a>
					</div>
					
					<div class="cal-line"></div>

					<div class="button-box">
						<div class="policy-cal">
							<label class="container">
								<a href="#" class="checkbox-link" style='display: inline-block; padding-top: 0;	'>Я даю согласие на обработку указанных мной персональных данных в целях записи на прием к врачу на условиях обработки персональных данных в соответствии с “Политикой обработки персональных данных”</a>
								<input type="checkbox">
								<span class="checkmark"></span>
							</label>
							<label class="container">
								<a href="#" class="checkbox-link" style='display: inline-block;padding-top: 0;'>Я соглашаюсь на получение информационных и  рекламных сообщений. С условиями предоставления  информационных и рекламных сообщений ознакомлен(а). </a>
								<input type="checkbox">
								<span class="checkmark"></span>
							</label>
						</div>

						<div class="buttons-cal">
							<div class="input-wrapper" style='margin-top: 0;'>
								<input name='phone' type="tel" class="input code-input" placeholder="Код подтверждения">
							</div>
							<a href="#" class="button button__accent button__size">Записаться на прием</a>
						</div>
					</div>

					<!-- <div class="row">
						<div class="input-wrapper">
							<input name='phone' type="tel" class="input" placeholder="+7(977) 999-99-99" value='+7'>
						</div>
						<div class="input-wrapper">
							<input name='firstname' type="text" class="input" placeholder="Имя">
						</div>
					</div>
					
					<div class="row">
						<div class="input-wrapper">
							<input name='lastname' type="text" class="input" placeholder="Фамилия">
						</div>
						<div class="input-wrapper">
							<input name='fathername' type="text" class="input" placeholder="Отчество">
						</div>
					</div>
					<div class="checks">
						<label class="container">
							<a href="#" class="checkbox-link">Условия использования</a>
							<input type="checkbox">
							<span class="checkmark"></span>
						</label>
						<label class="container">
							<a href="#" class="checkbox-link">Политика конфидециальности</a>
							<input type="checkbox">
							<span class="checkmark"></span>
						</label>
					</div>
					<input type="submit" class="button button__accent button__wide" value='Записаться'> -->

				</div>
			</section>
		</div>
		<script src='js/menu.js'></script>
		<script src="https://unpkg.com/imask"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
		<script src='js/data.js'></script>
		<script src='js/datepicker.min.js'></script>
	
		<script>
			(function() {	

				
				const date_field = $('#service_time');
				const date_translator = {6: 'июля', 7: 'августа', 8: 'сентября'}
				console.log(data);
				let doctor = data[3];
				$('#doctor_name').html(doctor.direction + ', ' + doctor.doctor);

				let doctor_time = doctor.time;
				
				let enabledDays = Object.keys(doctor_time).map(function (elem) {
					return +elem.split('.')[0];
				});
				let enabledMonth = Object.keys(doctor_time).map(function (elem) {
					return elem.split('.')[1] - 1;
				});

				let closeTime = Object.keys(doctor_time)[0];

				let tmp = closeTime.split('.');

				$('#calendar').datepicker({
					onSelect: function onSelect(fd, date, inst) {

						if ($('#calendar').datepicker().data('datepicker').selectedDates.length === 0) {
							// date_field.html('Не выбрано');
							$('#calendar').datepicker().data('datepicker').selectDate(new Date(tmp[2], tmp[1]-1, tmp[0]));
						} else {
							var month = date_translator[date.getMonth()];
							var day = date.getDate();

							document.querySelector('.time-box').innerHTML = '';

							for (time_item of doctor_time[fd]) {
								let div = document.createElement('div');
								div.classList.add('time-item');
								div.innerHTML = time_item;
								$('.time-box').append(div);
							}
							let first = document.querySelector('.time-item');
							first.classList.add('time-item__active')
							let day_date = day + ' ' + month; 
							date_field.text(day_date + ', ' + first.innerHTML);
							

							const items = [].slice.call(document.querySelectorAll('.time-item'));
							items.forEach(function (item, idx, arr) {
								item.addEventListener('click', function() {
									for (let el of arr) el.classList.remove('time-item__active');
									item.classList.add('time-item__active');
									date_field.text(day_date + ', ' + item.innerHTML);
								});
							});
						}	
					},
					onRenderCell: function (date, cellType) {
						if (cellType == 'day') {
							var day = date.getDate();
							var month = date.getMonth();
							isDisabled = enabledDays.indexOf(day) == -1 || enabledMonth.indexOf(month) == -1;

							return {
								disabled: isDisabled
							}
						}
					}
				});

				
				$('#calendar').datepicker().data('datepicker').selectDate(new Date(tmp[2], tmp[1]-1, tmp[0]));

				const items = [].slice.call(document.querySelectorAll('.time-item'));
				items.forEach(function (item, idx, arr) {
					item.addEventListener('click', function() {
						for (let el of arr) el.classList.remove('time-item__active');
						item.classList.add('time-item__active');
					});
				});

				const element = document.querySelector('input');
					var maskOptions = {
					mask: '+{7} (000) 000-00-00',
					lazy: false,
				};
				const mask = IMask(element, maskOptions);


			})();






		</script>
	</body>
</html>






